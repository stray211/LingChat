 # LingChat

## é¡¹ç›®ä»‹ç»

LingChatæ˜¯ä¸€ä¸ªåŸºäºAIçš„æ™ºèƒ½èŠå¤©ç³»ç»Ÿï¼Œå…·æœ‰æƒ…æ„Ÿåˆ†æã€è¯­éŸ³åˆæˆã€æ¡Œé¢å® ç‰©ç­‰å¤šç§åŠŸèƒ½ã€‚

### ä¸»è¦ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½å¯¹è¯**: åŸºäºDeepSeek APIçš„è‡ªç„¶è¯­è¨€å¤„ç†
- ğŸ˜Š **æƒ…æ„Ÿåˆ†æ**: 18ç§æƒ…æ„ŸçŠ¶æ€è¯†åˆ«å’Œå¯è§†åŒ–è¡¨è¾¾
- ğŸ”Š **è¯­éŸ³åˆæˆ**: æ”¯æŒVITSæ¨¡å‹çš„é«˜è´¨é‡è¯­éŸ³è¾“å‡º
- ğŸ¾ **æ¡Œé¢å® ç‰©**: å¯çˆ±çš„æ¡Œé¢AIåŠ©æ‰‹
- ğŸ’¾ **è®°å¿†ç³»ç»Ÿ**: RAGæŠ€æœ¯å®ç°çš„é•¿æœŸè®°å¿†åŠŸèƒ½
- ğŸŒ **Webç•Œé¢**: ç°ä»£åŒ–çš„å‰ç«¯ç”¨æˆ·ç•Œé¢
- ğŸ”— **WebSocket**: å®æ—¶åŒå‘é€šä¿¡

### æŠ€æœ¯æ ˆ

- **åç«¯**: Python, FastAPI, WebSocket
- **å‰ç«¯**: HTML, CSS, JavaScript
- **AIæ¨¡å‹**: DeepSeek
- **è¯­éŸ³**: VITS TTS
- **æ•°æ®åº“**: SQLite
- **éƒ¨ç½²**: Docker (å¯é€‰)

## Releseå®‰è£…

### ä¸‹è½½&ä½¿ç”¨exeç¨‹åº

- åœ¨[Release](https://github.com/SlimeBoyOwO/LingChat/releases)ä¸­ä¸‹è½½é™„ä»¶ï¼Œå¹¶è§£å‹ã€‚
- è§£å‹åï¼Œä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€appæ–‡ä»¶å¤¹.envï¼Œåœ¨.envä¸­å¡«å…¥ä½ çš„apikeyã€‚deepseek apikeyç™»å½•[DeepSeek å¼€æ”¾å¹³å°](https://platform.deepseek.com/usage)åè·å–ã€‚è¯·å¦¥å–„ä¿ç®¡è‡ªå·±çš„apikeyã€‚
- ç‚¹å‡»LingChat.exeå¯åŠ¨ç¨‹åº
- (éå¿…é¡»):è‹¥è¦ä½¿ç”¨è¯­éŸ³åŠŸèƒ½ï¼Œè¯·ä¸‹è½½[simple-vits-api](https://github.com/Artrajz/vits-simple-api)é“¾æ¥ç¨‹åºã€‚è¯¥é¡¹ç›®å®ç°äº†åŸºäº VITS çš„ç®€å•è¯­éŸ³åˆæˆ APIã€‚å»ºè®®ä¸‹è½½GPUç‰ˆæœ¬ï¼Œé€Ÿåº¦å¿«ã€‚ç¨‹åºé»˜è®¤ç›‘å¬23456è¯­éŸ³ç«¯å£ï¼Œç¨‹åºé»˜è®¤å¯¼å…¥çš„æ¨¡å‹æ˜¯zcchatåœ°å€->è®¨è®ºåŒº->è§’è‰²ç¤ºèŒƒï¼ˆä¸›é›¨ï¼‰->vitsæ¨¡å‹ä¸‹è½½å¥½ä¹‹ååœ¨simple-vits-apiçš„ç›®å½•çš„/data/modelsé‡Œé¢è§£å‹ï¼Œå†å¯åŠ¨å°±okäº†;å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–æ¨¡å‹ï¼Œåœ¨.envçš„Vitså®ç°å‡½æ•°æ›´æ”¹ç›¸å…³è®¾å®šå³å¯ã€‚
- appæ–‡ä»¶å¤¹å†…çš„rag_chat_historyæ–‡ä»¶å¤¹çš„æ‰€æœ‰å¯¹è¯è®°å¿†å°†è¢«æ°¸ä¹…å‚¨å­˜ã€‚æ‰“å¼€RAGå¼€å…³åï¼Œæœ¬è½®å¯¹è¯å°†ä¼šå‚¨å­˜åœ¨rag_chat_historyæ–‡ä»¶å¤¹å†…ã€‚**å¦‚æœä½ æ‰‹åŠ¨æ›´æ”¹äº†è¯¥æ–‡ä»¶å¤¹å†…éƒ¨çš„å¯¹è¯è®°å½•ï¼Œè¯·æ‰‹åŠ¨åˆ é™¤appæ–‡ä»¶å¤¹ä¸‹çš„æ•´ä¸ªchroma_db_storeæ–‡ä»¶å¤¹ä»¥æ›´æ–°è®°å¿†åº“**ã€‚è¯¥æ–‡ä»¶å¤¹æ˜¯æé«˜å¯åŠ¨é€Ÿåº¦çš„æ°¸ä¹…è®°å¿†ç¼“å­˜åŒºåŸŸã€‚

### ä¸‹è½½æƒ…æ„Ÿåˆ†ç±»æ¨¡å‹

æƒ…æ„Ÿåˆ†ç±»æ¨¡å‹å·²åŒ…å«åœ¨Releasesä¸­ï¼ŒåŒå‡»exeå³å¯å¯åŠ¨ã€‚æºä»£ç å†…ä¸åŒ…å«ï¼Œè¯·æ‰‹åŠ¨ä¸‹è½½releaseç„¶åç§»åŠ¨è¿‡å»ã€‚

## æºç éƒ¨ç½²

### Linux

+ ç¯å¢ƒé…ç½®
  
  ```bash
  conda create -n LingChat python=3.12
  conda activate LingChat
  pip install -r requirement.txt
  ```

+ API KEYé…ç½®
  
  ```bash
  cp ./.env.example ./.env
  ```
  
  ç„¶åå°†.envä¸­çš„CHAT_API_KEYå’ŒVD_API_KEYæ›¿æ¢ä¸ºè‡ªå·±çš„API keyã€‚

+ æƒ…ç»ªæ¨ç†æ¨¡å‹å’Œå£°éŸ³ä¸‹è½½
  
  ï¼ˆå…„å¼Ÿä»¬å…ˆå°†å°±ç€ä»releseåŒ…é‡Œé¢è§£å‹å‡ºæ¥å§ã€‚ï¼‰
  
  ```bash
  cp <relese-file-path>/app/backend/emotion_model_18emo/model.safetensors <source-code-path>/backend/emotion_model_18emo/
  cp <relese-file-path>/app/frontend/public/audio/* <source-code-path>/frontend/public/audio/
  ```

+ è¿è¡Œ
  
  ```bash
  python ./backend/windows_main.py
  ```
  
  PSï¼šä½ æ²¡çœ‹é”™ï¼ŒLinuxçš„å¯åŠ¨æ–‡ä»¶ä¹Ÿæ˜¯windows_main.py ........

### Windows

+ ç¯å¢ƒé…ç½®
  
  **æ–¹æ³•ä¸€ï¼šä½¿ç”¨Condaï¼ˆæ¨èï¼‰**
  
  ```cmd
  conda create -n LingChat python=3.12
  conda activate LingChat
  pip install -r requirements.txt
  ```
  
  **æ–¹æ³•äºŒï¼šä½¿ç”¨Pythonè™šæ‹Ÿç¯å¢ƒ**
  
  ```cmd
  python -m venv LingChat
  LingChat\Scripts\activate
  pip install -r requirements.txt
  ```

+ API KEYé…ç½®
  
  ```cmd
  copy .env.example .env
  ```
  
  ç„¶åä½¿ç”¨è®°äº‹æœ¬æˆ–å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€`.env`æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„`CHAT_API_KEY`å’Œ`VD_API_KEY`æ›¿æ¢ä¸ºè‡ªå·±çš„API keyã€‚
  
  æˆ–è€…åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥ç¼–è¾‘ï¼š
  
  ```cmd
  notepad .env
  ```

+ æƒ…ç»ªæ¨ç†æ¨¡å‹å’Œå£°éŸ³ä¸‹è½½
  
  ï¼ˆåŒLinuxï¼Œå¯ä»releaseåŒ…é‡Œé¢è§£å‹ï¼‰

+ è¿è¡Œ
  
  **æ–¹æ³•ä¸€ï¼šä½¿ç”¨Pythonç›´æ¥è¿è¡Œ**
  
  ```cmd
  python .\backend\windows_main.py
  ```
  
  **æ–¹æ³•äºŒï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶**
  
  åŒå‡»æ ¹ç›®å½•ä¸‹çš„`start.windows.bat`æ–‡ä»¶å¯åŠ¨ç¨‹åºã€‚
  
  **æ–¹æ³•ä¸‰ï¼šä½¿ç”¨æ¡Œé¢å® ç‰©æ¨¡å¼**
  
  åŒå‡»æ ¹ç›®å½•ä¸‹çš„`desk_pet.bat`æ–‡ä»¶å¯åŠ¨æ¡Œé¢å® ç‰©ç‰ˆæœ¬ã€‚

## å¼€å‘æ–‡æ¡£

### é¡¹ç›®ç»“æ„

```
LingChat/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ api/                   # APIè·¯ç”±å’Œå¤„ç†
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ desktop_pet/           # æ¡Œé¢å® ç‰©åŠŸèƒ½
â”‚   â”œâ”€â”€ emotion_model_*/       # æƒ…æ„Ÿåˆ†ææ¨¡å‹
â”‚   â”œâ”€â”€ go-impl/              # Goè¯­è¨€å®ç°
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”œâ”€â”€ frontend/                  # å‰ç«¯ä»£ç 
â”œâ”€â”€ characters/               # è§’è‰²å›¾ç‰‡èµ„æº
â”œâ”€â”€ data/                     # æ•°æ®æ–‡ä»¶
â””â”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶
```

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

+ **ai_service.py**: AIæœåŠ¡æ ¸å¿ƒï¼Œå¤„ç†ä¸AIæ¨¡å‹çš„äº¤äº’
+ **deepseek.py**: DeepSeek APIé›†æˆ
+ **predictor.py**: æƒ…æ„Ÿé¢„æµ‹åŠŸèƒ½
+ **VitsTTS.py**: è¯­éŸ³åˆæˆåŠŸèƒ½
+ **websocket_server.py**: WebSocketæœåŠ¡å™¨
+ **RAG.py**: æ£€ç´¢å¢å¼ºç”ŸæˆåŠŸèƒ½

### APIæ¥å£æ–‡æ¡£

#### èŠå¤©æ¥å£ï¼ˆpendingï¼‰

- **POST** `/api/chat`
  - åŠŸèƒ½ï¼šå‘é€èŠå¤©æ¶ˆæ¯
  - å‚æ•°ï¼š`message`, `user_id`, `session_id`

#### æƒ…æ„Ÿåˆ†ææ¥å£ï¼ˆpendingï¼‰

- **POST** `/api/emotion`
  - åŠŸèƒ½ï¼šåˆ†ææ–‡æœ¬æƒ…æ„Ÿ
  - å‚æ•°ï¼š`text`

#### è¯­éŸ³åˆæˆæ¥å£ï¼ˆpendingï¼‰

- **POST** `/api/tts`
  - åŠŸèƒ½ï¼šæ–‡æœ¬è½¬è¯­éŸ³
  - å‚æ•°ï¼š`text`, `voice_model`

### å¼€å‘æŒ‡å—

Â Â Â Â pending

# 

### è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»ºPull Request

### è®¸å¯è¯

æŸ¥çœ‹LICENSEæ–‡ä»¶äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚