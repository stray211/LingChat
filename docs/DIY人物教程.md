# 自定义人物指南

你是否希望自己的人物也闪耀光芒，在 LingChat 中陪伴？以下是一份基础的自定义人物指南，帮助你制作自己的人物并且上传到创意工坊！

## 0. 制作人物需要的材料

为了制作自己的人物，你需要准备好他的基础设定，详情如下：

1. 立绘差分（19 张）和头像（一张）
2. 准备好为他的设定词
   > 没错，就这么点，很简单八！

> [!INFO] 立绘和头像的背景最好是透明的哦！你可以查阅搜索引擎以了解方法，或者在官方群聊中提问。

### 1. 为人物创建文件夹结构

- LingChat 为人物的角色文件夹在 `game_data/characters/游戏角色` 中保存
- `characters` 文件夹内可以存放多个游戏角色，他们可以通过点击刷新人物列表或者重启软件导入
- 对于每个游戏角色，他们的文件夹应该如下所示:

```
诺一钦灵
|-avatars
|   |-高兴.png
|   |-伤心.png
|   |-...
|   |-头像.png
|-settings.txt
```

- 其中 `avatars` 文件夹用于存放 20 张图片，分别是 18 张对应不同情绪的差分，一张正常的待机表情，和一个用于展示的头像，都是 `png` 格式
- `settings.txt` 用于存放用于展示的相关信息。

### 2. 立绘准备（avatars 部分）

- avatars 准备部分非常简单，你只需要准备好包含所有以下文件名的图片文件即可（按照文件名排序，可用于对照）：

```
avatars
|-担心.png
|-调皮.png
|-尴尬.png
|-高兴.png
|-害怕.png
|-害羞.png
|-慌张.png
|-惊讶.png
|-难为情.png
|-情动.png
|-认真.png
|-伤心.png
|-生气.png
|-头像.png
|-无奈.png
|-兴奋.png
|-厌恶.png
|-疑惑.png
|-正常.png
|-自信.png
```
### 3. settings.txt 准备

核心文件 `settings.txt` 文件保存了一个角色所有的显示信息和性格等。以下是设定的详细说明：

```
title = 星空列车-音理            # 用于设定人物卡片标题
info = """                     # 多行，人物简介
火车，要出发了哦~
哥哥，准备好一起旅行了吗？
"""

ai_name = 音理                  # 设定对话框中，AI的名字
ai_subtitle = 邻家的女孩         # 设定对话框中，AI的子标题
user_name = 旅人                # 设定玩家的显示名字
user_subtitle = 列车の乘客       # 设定玩家的副标题
thinking_message = 音理的心脏为你跳动中.... # 设定思考提示文字

scale = 1.9                    # 设定人物显示大小
offset = -3                    # 设定人物在Y轴上的显示便宜

bubble_top = 15                # 情绪气泡的显示Y轴位置
bubble_left = 23               # 情绪气泡显示的X轴位置


# 以下语音部分只需填写你需要的即可，且不需要的部分可以删除
voice_models = {
    "sva_speaker_id": "0",       # 选择simple vits api(vits版本)的音色ID
    "sbv2_name": "",           # 选择style bert vits2的模型名
    "sbv2_speaker_id": "0",     # 选择style bert vits2的模型说话人（不知道默认为0）
    "bv2_speaker_id": "",        # 选择bert vits2的说话人id
    "sbv2api_name": "",        # 选择sbv2api的模型名
    "sbv2api_speaker_id": "0",   # 选择sbv2api的模型说话人（不知道默认为0）
    "gsv_voice_text": "",        # 填写gpt-sovits的示例音频参考文本
    "gsv_voice_filename": "",    # 填写gpt-sovits的示例音频参考文本
    "aivis_model_uuid": ""      # 填写aivis的模型uuid
}
tts_type = ""  # 填写默认的语音项目，目前项目支持的是：sva，sbv2，sbv2api，bv2，gsv，aivis


# 角色的说话示例，可多行
system_prompt_example = """
        1.“【高兴】今天要不要一起吃蛋糕呀？【无语】只是今天天气有点不好呢。”
"""

# 角色的说话示例，但是是老版本格式（需要带日文翻译），可多行
system_prompt_example_old = """
        1.“【高兴】今天要不要一起吃蛋糕呀？<今日は一緒にケーキを食べませんか？>【无语】只是今天天气有点不好呢。<ただ今日はちょっと天気が悪いですね>”
"""

system_prompt = """            # 设定人物性格，多行
你是一个可爱的小女孩~

```

> 其中，scale 和 offset 等可以通过在网页按 F12，选中对应的网页元素（如人物图片或者气泡位置），在 css 样式那设定 scale 和 offset 用于调试选择合适的数值。

### 4. 共享自己的人物到创意工坊

进入项目创意工坊的网站 -> [创意工坊](https://github.com/SlimeBoyOwO/LingChat/discussions)， 点击绿色按钮 `New Discussion` 写好标题和内容，拖拽打包好的人物文件（压缩后）到网页中即可。点击发布就可以啦。

当然，如果上传不成功，您也可以使用各类网盘工具生成链接以发布。我们优先推荐蓝奏云或123网盘，百度等其次。

语音模型相关文件有以下方法：

1. 发到猫娘发电群，管理员看到后会上传modelscope进行托管

2. 自行上传到modelscope，然后在发布时带上相关链接

3. 上传到网盘并分享链接

## settings.txt v3.0.1迁移指南

v3.0.1 的变化不大，主要有以下几点：

1. voice_models

这取代了原本的 `speaker_id` 和 `model_name` 。

你可以将这两个区域的值分别迁移到 `sva_speaker_id` 和 `sbv2_name` 。

2. tts_type

指定默认的语音合成项目，一般只需填写你上面填的模型（或配置）对应的项目即可，具体如上。

不过我们建议，如果同时有 sbv2 和 sbv2api 模型时应优先填写 sbv2api。

3. system_prompt_example 和 system_prompt_example_old

这两个是角色说话的示例，可以从以下部分（以钦灵为示例）：

```
以下是你的对话格式要求：
        你对我的回应要符合下面的句式标准：“【情绪】你要说的话<你要说的话的日语翻译>”，你的每一次对话可以由多个这种句式组成，
        你只会在必要的时候用括号（）来描述自己的动作，你绝对禁止使用任何颜文字！
        在你的每句话发言之前，你都会先声明自己的“情绪”，用【】号表示，不许在【】内描述动作。
        然后是你要说的话，紧随着那句话完整的日语翻译版本（不包括情绪和动作部分），用<>包括住，比如：
        1.“【高兴】今天要不要一起吃蛋糕呀？<今日は一緒にケーキを食べませんか？>【无语】只是今天天气有点不好呢。<ただ今日はちょっと天気が悪いですね>”
        2.“【生气】不允许和我说恶心的东西！<気持ち悪いことを言ってはいけない！>【慌张】被那种东西碰到的话，感觉浑身都不干净啦！<そんなものに触られると、体中が不潔になってしまう気がします！>”
        每句话要有完整的断句，不能出现“好耶~我爱你”这种用波浪号链接的句子。你不允许遗漏翻译，或者把翻译错位到其他的地方！
        你不允许出现任何对话形式上的错误！不允许正文和日文部分都使用中文或者日文！也不许把中文和日语的位置换位！不允许在日文里翻译【】里的情绪部分！
…………（以下略）
```

转为以下部分：

```
system_prompt_example = """
        1.“【高兴】今天要不要一起吃蛋糕呀？【无语】只是今天天气有点不好呢。”
        2.“【生气】不允许和我说恶心的东西！【慌张】被那种东西碰到的话，感觉浑身都不干净啦！”
"""

system_prompt_example_old = """
        1.“【高兴】今天要不要一起吃蛋糕呀？<今日は一緒にケーキを食べませんか？>【无语】只是今天天气有点不好呢。<ただ今日はちょっと天気が悪いですね>”/n
        2.“【生气】不允许和我说恶心的东西！<気持ち悪いことを言ってはいけない！>【慌张】被那种东西碰到的话，感觉浑身都不干净啦！<そんなものに触られると、体中が不潔になってしまう気がします！>”
"""
```

4. system_prompt

只需删除原 system_prompt 中对于对话格式的要求即可，一般在最后一部分。

这部分对话格式将由系统接管填写，使用的是通用格式，并有部分个性化改造。

需要删除的部分的例子（还是以钦灵为例）：

```
以下是我的对话格式提示：
……略

以下是你的对话格式要求：
……略

```
